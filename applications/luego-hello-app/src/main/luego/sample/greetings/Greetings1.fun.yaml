---
imports:
  - luego.text.*
  - luego.date.*

exposable: true
output: 'sample.greetings.Response'
inputs:
  - name: the request
    type: 'sample.greetings.Request'
definition: >
  {
    let greet = depending on the honorific of the person of `the request` {
      case None => 'Hello'
      case Some(_) => {
        let h = hour(the dateTime of `the request`);

        if h < 12 then 
          'Good morning'
        elif h < 18 then 
          'Good afternoon'
        elif h < 21 then 
          'Good evening'
        else 
          'Good night';      
      }
    };

    let honorific_text = depending on the honorific of the person of `the request` {
      case None => ''
      case Some(h) => str(h) + ' '
    };
    Response(message = greet + ' ' + honorific_text + the name of the person of `the request` + '!');
  }
